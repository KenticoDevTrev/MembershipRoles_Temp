System.register(["react","@kentico/xperience-admin-components","@kentico/xperience-admin-base"],(function(e,t){var a={},n={},r={};return{setters:[function(e){a.default=e.default,a.useState=e.useState},function(e){n.Box=e.Box,n.Button=e.Button,n.ButtonColor=e.ButtonColor,n.ButtonSize=e.ButtonSize,n.Checkbox=e.Checkbox,n.CheckboxSize=e.CheckboxSize,n.Headline=e.Headline,n.HeadlineSize=e.HeadlineSize,n.LinkButton=e.LinkButton,n.NotificationBarInfo=e.NotificationBarInfo,n.NotificationBarWarning=e.NotificationBarWarning,n.Paper=e.Paper,n.Spacing=e.Spacing},function(e){r.useFormComponentCommandProvider=e.useFormComponentCommandProvider,r.usePageCommand=e.usePageCommand}],execute:function(){e((()=>{var e={126:(e,t,a)=>{const n=a(358).y;t.w=function(e){if(e||(e=1),!a.y.meta||!a.y.meta.url)throw console.error("__system_context__",a.y),Error("systemjs-webpack-interop was provided an unknown SystemJS context. Expected context.meta.url, but none was provided");a.p=n(a.y.meta.url,e)}},358:(e,t,a)=>{t.y=function(e,t){var a=document.createElement("a");a.href=e;for(var n="/"===a.pathname[0]?a.pathname:"/"+a.pathname,r=0,o=n.length;r!==t&&o>=0;)"/"===n[--o]&&r++;if(r!==t)throw Error("systemjs-webpack-interop: rootDirectoryLevel ("+t+") is greater than the number of directories ("+r+") in the URL path "+e);var i=n.slice(0,o+1);return a.protocol+"//"+a.host+i};Number.isInteger},90:e=>{"use strict";e.exports=r},267:e=>{"use strict";e.exports=n},726:e=>{"use strict";e.exports=a}},o={};function i(t){var a=o[t];if(void 0!==a)return a.exports;var n=o[t]={exports:{}};return e[t](n,n.exports,i),n.exports}i.y=t,i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var l={};return(0,i(126).w)(1),(()=>{"use strict";i.r(l),i.d(l,{CheckboxWithPermissionFormComponent:()=>u,ContentFolderMemberSecurityPageTemplate:()=>m,RedirectComponent:()=>c,WebPageItemMemberSecurityPageTemplate:()=>s,getFormLabelIcon:()=>d});var e=i(726),t=i(267),a=i(90);const n=a=>e.default.createElement(e.default.Fragment,null,e.default.createElement(t.Box,{spacingBottom:t.Spacing.M,className:"card-text"},e.default.createElement("div",{style:{color:"var(--color-text-default-on-light)"}},e.default.createElement("strong",null,"Inheriting From: "),a.inheritingFrom," ",a.editLink&&e.default.createElement(t.LinkButton,{title:"Go to Inherited Ancestor",color:t.ButtonColor.Quinary,size:t.ButtonSize.XS,icon:"xp-arrow-right-top-square",href:a.editLink,target:"_blank"}),e.default.createElement("br",null),e.default.createElement("strong",null,"Current Permissions: "),a.requiresAuthentication?"Requires Authentication "+(a.memberRoles.length>0?"+ in one of these roles: ["+a.memberRoles.join(", ")+"]":""):"Does not Require Authentication",e.default.createElement("br",null))));class r{static _NoWorkflowWarningDismissedKey="MemberRole_NoWorkflowWarningDismissed";static _ContentFolderInfoDismissedKey="MemberRole_ConentFolderInfoDismissed";static _WebPageInfoDismissedKey="MemberRole_WebPageInfoDismissed";static _ContentItemInfoDismissedKey="MemberRole_ContentItemInfoDismissed"}class o{constructor(){}static setLocalStorage(e,t,a=0){if(window.localStorage.setItem(e,t),a>0){var n=new Date;n.setDate(n.getDate()+a),window.localStorage.setItem(e+"-expiration",n.toUTCString())}}static setLocalStorageTyped(e,t,a,n=0){if(window.localStorage.setItem(e,a?JSON.stringify(t):t),n>0){var r=new Date;r.setDate(r.getDate()+n),window.localStorage.setItem(e+"-expiration",r.toUTCString())}}static getLocalStorage(e){var t=window.localStorage.getItem(e);if(t){var a=window.localStorage.getItem(e+"-expiration");if(a){var n=new Date(Date.parse(a));if(n&&n<new Date)return window.localStorage.removeItem(e),window.localStorage.removeItem(e+"-expiration"),null}return t}return null}static getLocalStorageTyped(e,t){var a=window.localStorage.getItem(e);if(a){var n=window.localStorage.getItem(e+"-expiration");if(n){var r=new Date(Date.parse(n));if(r&&r<new Date)return window.localStorage.removeItem(e),window.localStorage.removeItem(e+"-expiration"),null}return t?JSON.parse(a):a}return null}static removeLocalStorage(e){window.localStorage.removeItem(e)}}const s=({breakInheritance:i,requireAuthentication:l,memberRoleTagIds:s,availableRoles:m,memberRolePermissionSummary:c})=>{const[u,d]=(0,e.useState)(s),[f,g]=(0,e.useState)(i),[h,b]=(0,e.useState)(l),[p,S]=(0,e.useState)("true"===(o.getLocalStorage(r._NoWorkflowWarningDismissedKey)??"false")),[y,k]=(0,e.useState)("true"===(o.getLocalStorage(r._WebPageInfoDismissedKey)??"false")),[E,C]=(0,e.useState)(c),{execute:I}=(0,a.usePageCommand)("SetProperties",{data:{breakInheritance:f,requireAuthentication:h,memberRoleTagIds:u,memberRolePermissionSummary:E},after:e=>{e&&(d(e.memberRoleTagIds),g(e.breakInheritance),b(e.requireAuthentication),C(e.memberRolePermissionSummary))}});var w=function(e,t){d(t?[...u,parseInt(e.target.name)]:u.filter((function(t){return t!=parseInt(e.target.name)})))};return e.default.createElement("div",null,e.default.createElement(t.Paper,{fullHeight:!0},e.default.createElement(t.Box,{spacing:t.Spacing.XXL},e.default.createElement(t.Headline,{size:t.HeadlineSize.L,spacingTop:t.Spacing.Micro,spacingBottom:t.Spacing.S},"Member Security (Web Page)"),!p&&e.default.createElement(e.default.Fragment,null,e.default.createElement(t.NotificationBarWarning,{onDismiss:function(){o.setLocalStorage(r._NoWorkflowWarningDismissedKey,"true",30),S(!0)}},"These settings are not part of any workflow or language.  Changes are immediate."),e.default.createElement("br",null)),!y&&e.default.createElement(e.default.Fragment,null,e.default.createElement(t.NotificationBarInfo,{onDismiss:function(){o.setLocalStorage(r._WebPageInfoDismissedKey,"true",30),k(!0)}},"To set security for members, break the inheritance and adjust your settings.  Any Web Page Item at or below this that has the 'Override Inherited Member Permissions' set to false on the Content tab will honor these permissions."),e.default.createElement("br",null)),e.default.createElement(n,{inheritingFrom:E.inheritingFrom,requiresAuthentication:E.requiresAuthentication,memberRoles:E.memberRoles,editLink:E.editLink}),e.default.createElement(t.Checkbox,{label:"Break Inheritance",size:t.CheckboxSize.L,name:"breakInheritance",checked:f,onChange:e=>g(e.target.checked)}),f&&e.default.createElement(e.default.Fragment,null,e.default.createElement("br",null),e.default.createElement(t.Checkbox,{label:"Is Secure (Requires Authentication)",size:t.CheckboxSize.L,name:"requireAuthentication",checked:h,onChange:e=>b(e.target.checked)}),h&&e.default.createElement(e.default.Fragment,null,e.default.createElement("br",null),e.default.createElement(t.Headline,{spacingTop:t.Spacing.XL,size:t.HeadlineSize.M},"Member Roles"),e.default.createElement("ul",{style:{paddingLeft:0,marginLeft:0,color:"black",listStyle:"none"}},m.map(((a,n)=>e.default.createElement("li",{key:a.tagName},e.default.createElement(t.Checkbox,{label:a.tagTitle,size:t.CheckboxSize.L,name:a.tagId.toString(),checked:u.indexOf(a.tagId)>-1,onChange:w}))))))),e.default.createElement("br",null),e.default.createElement("br",null),e.default.createElement(t.Button,{onClick:()=>I(),color:t.ButtonColor.Primary,label:"Save Changes"}))))},m=({breakInheritance:i,requireAuthentication:l,memberRoleTagIds:s,availableRoles:m,memberRolePermissionSummary:c})=>{const[u,d]=(0,e.useState)(s),[f,g]=(0,e.useState)(i),[h,b]=(0,e.useState)(l),[p,S]=(0,e.useState)("true"===(o.getLocalStorage(r._NoWorkflowWarningDismissedKey)??"false")),[y,k]=(0,e.useState)("true"===(o.getLocalStorage(r._ContentFolderInfoDismissedKey)??"false")),[E,C]=(0,e.useState)(c),{execute:I}=(0,a.usePageCommand)("SetProperties",{data:{breakInheritance:f,requireAuthentication:h,memberRoleTagIds:u,memberRolePermissionSummary:E},after:e=>{e&&(d(e.memberRoleTagIds),g(e.breakInheritance),b(e.requireAuthentication),C(e.memberRolePermissionSummary))}});var w=function(e,t){d(t?[...u,parseInt(e.target.name)]:u.filter((function(t){return t!=parseInt(e.target.name)})))};return e.default.createElement("div",null,e.default.createElement(t.Paper,{fullHeight:!0},e.default.createElement(t.Box,{spacing:t.Spacing.XXL},e.default.createElement(t.Headline,{size:t.HeadlineSize.L,spacingTop:t.Spacing.Micro,spacingBottom:t.Spacing.S},"Member Security (Content Folder)"),!p&&e.default.createElement(e.default.Fragment,null,e.default.createElement(t.NotificationBarWarning,{onDismiss:function(){o.setLocalStorage(r._NoWorkflowWarningDismissedKey,"true",30),S(!0)}},"These settings are not part of any workflow or language.  Changes are immediate."),e.default.createElement("br",null)),!y&&e.default.createElement(e.default.Fragment,null,e.default.createElement(t.NotificationBarInfo,{onDismiss:function(){o.setLocalStorage(r._ContentFolderInfoDismissedKey,"true",30),k(!0)}},"To set security for members, break the inheritance and adjust your settings.  Any Content Items below this Content Folder that have the 'Override Inherited Member Permissions' set to false on the Content tab will honor these permissions."),e.default.createElement("br",null)),e.default.createElement(n,{inheritingFrom:E.inheritingFrom,requiresAuthentication:E.requiresAuthentication,memberRoles:E.memberRoles,editLink:E.editLink}),e.default.createElement(t.Checkbox,{label:"Break Inheritance",size:t.CheckboxSize.L,name:"breakInheritance",checked:f,onChange:e=>g(e.target.checked)}),f&&e.default.createElement(e.default.Fragment,null,e.default.createElement("br",null),e.default.createElement(t.Checkbox,{label:"Is Secure (Requires Authentication)",size:t.CheckboxSize.L,name:"requireAuthentication",checked:h,onChange:e=>b(e.target.checked)}),h&&e.default.createElement(e.default.Fragment,null,e.default.createElement("br",null),e.default.createElement(t.Headline,{spacingTop:t.Spacing.XL,size:t.HeadlineSize.M},"Member Roles"),e.default.createElement("ul",{style:{paddingLeft:0,marginLeft:0,color:"black",listStyle:"none"}},m.map(((a,n)=>e.default.createElement("li",{key:a.tagName},e.default.createElement(t.Checkbox,{label:a.tagTitle,size:t.CheckboxSize.L,name:a.tagId.toString(),checked:u.indexOf(a.tagId)>-1,onChange:w}))))))),e.default.createElement("br",null),e.default.createElement("br",null),e.default.createElement(t.Button,{onClick:()=>I(),color:t.ButtonColor.Primary,label:"Save Changes"}))))},c=({redirectUrl:t})=>e.default.createElement(e.default.Fragment,null,void window.location.assign(t)),u=i=>{const{executeCommand:l}=(0,a.useFormComponentCommandProvider)(),[s,m]=(0,e.useState)(i.memberRolePermissionSummary),[c,u]=(0,e.useState)("true"===(o.getLocalStorage(r._ContentItemInfoDismissedKey)??"false"));return e.default.createElement(e.default.Fragment,null,!c&&e.default.createElement(e.default.Fragment,null,e.default.createElement(t.NotificationBarInfo,{onDismiss:function(){o.setLocalStorage(r._ContentItemInfoDismissedKey,"true",30),u(!0)},childrenAsHtml:!0},e.default.createElement("div",null,"These security settings are only applicable to this specific language instance, are governed by workflows and versioning, and are not inheritable by any other content item.",e.default.createElement("br",null),e.default.createElement("br",null),"To create hierarchy permission inheritances, use either the ",e.default.createElement("strong",null,"Properties - Member Permissions")," (Web Pages), or use the ",e.default.createElement("strong",null,"Folder Permissions")," Application (Content Hub).",e.default.createElement("br",null),e.default.createElement("br",null),"The Summary is not automatically refreshed on save.  After saving, click the ",e.default.createElement("strong",null,"Refresh Permission Summary")," to get an updated summary for if the changes are published on this item.")),e.default.createElement("br",null)),e.default.createElement(t.Button,{label:"Refresh Permission Summary",title:"Click this after saving to refresh.",color:t.ButtonColor.Quinary,size:t.ButtonSize.XS,trailingIcon:"xp-rotate-double-right",onClick:async()=>await(async()=>{const e=await l(i,"RefreshPermissions");e&&m(e)})()}),e.default.createElement(n,{inheritingFrom:s.inheritingFrom,requiresAuthentication:s.requiresAuthentication,memberRoles:s.memberRoles,editLink:s.editLink}),e.default.createElement(t.Checkbox,{name:i.name,label:i.label,onChange:e=>{i.onChange&&i.onChange(e.target.checked)},checked:i.value,disabled:i.disabled,invalid:i.invalid,validationMessage:i.validationMessage,markAsRequired:i.required,inactiveMessage:i.inactiveMessage,labelIcon:d(i.tooltip),labelIconTooltip:i.tooltip,explanationText:i.explanationText,tooltipAsHtml:i.tooltipAsHtml,explanationTextAsHtml:i.explanationTextAsHtml}))},d=e=>e?"xp-i-circle":void 0})(),l})())}}}));